# Planer - Task Management App

## ‚úÖ –ß—Ç–æ —É–∂–µ —Å–¥–µ–ª–∞–Ω–æ (MVP v1)

### Backend (Cloudflare Workers + D1)

#### 1. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –°–æ–∑–¥–∞–Ω–∞ –º–∏–≥—Ä–∞—Ü–∏—è `0002_tasks_schema.sql` —Å —Ç–∞–±–ª–∏—Ü–∞–º–∏:
  - `users` - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ (—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å Firebase)
  - `tasks` - –∑–∞–¥–∞—á–∏ —Å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞–º–∏ –∏ —Å—Ç–∞—Ç—É—Å–∞–º–∏
  - `tags` - —Ç–µ–≥–∏ (–∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)
  - `task_tags` - —Å–≤—è–∑—å many-to-many
  - `task_recurrence` - –ø—Ä–∞–≤–∏–ª–∞ –ø–µ—Ä–∏–æ–¥–∏—á–Ω–æ—Å—Ç–∏
  - `task_instances` - –∏–Ω—Å—Ç–∞–Ω—Å—ã –ø–æ–≤—Ç–æ—Ä—è—é—â–∏—Ö—Å—è –∑–∞–¥–∞—á
  - `shared_tasks` - —à–∞—Ä–∏–Ω–≥ –∑–∞–¥–∞—á –º–µ–∂–¥—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
  - `user_friends` - –¥—Ä—É–∑—å—è –¥–ª—è —É–¥–æ–±–Ω–æ–≥–æ —à–∞—Ä–∏–Ω–≥–∞
  - `task_history` - –∞—É–¥–∏—Ç –ª–æ–≥ –≤—Å–µ—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π

#### 2. TypeScript —Ç–∏–ø—ã
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω `worker/db-types.ts` —Å–æ –≤—Å–µ–º–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞–º–∏

#### 3. API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã
- ‚úÖ **Users API** (`/api/users/*`):
  - `POST /sync` - —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  - `GET /me` - —Ç–µ–∫—É—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
  - `PUT /me` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è
  - `GET /search?q=` - –ø–æ–∏—Å–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –¥–ª—è —à–∞—Ä–∏–Ω–≥–∞

- ‚úÖ **Tasks API** (`/api/tasks/*`):
  - `POST /` - —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏
  - `GET /` - —Å–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏
  - `GET /:id` - –ø–æ–ª—É—á–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏
  - `PUT /:id` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏
  - `PATCH /:id/status` - –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞
  - `DELETE /:id` - –º—è–≥–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ
  - `DELETE /:id/hard` - –∂–µ—Å—Ç–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ
  - `POST /:id/duplicate` - –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ
  - `GET /:id/history` - –∏—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

- ‚úÖ **Tags API** (`/api/tags/*`):
  - `POST /` - —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–µ–≥–∞
  - `GET /` - —Å–ø–∏—Å–æ–∫ —Ç–µ–≥–æ–≤
  - `GET /:id` - –ø–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–≥–∞
  - `PUT /:id` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–µ–≥–∞
  - `DELETE /:id` - —É–¥–∞–ª–µ–Ω–∏–µ —Ç–µ–≥–∞
  - `GET /:id/count` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–¥–∞—á —Å —Ç–µ–≥–æ–º

#### 4. –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
- ‚úÖ `worker/utils/db-helpers.ts` - —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ë–î

### Frontend (React + TypeScript + Material-UI)

#### 1. –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
- ‚úÖ `react-router-dom` - —Ä–æ—É—Ç–∏–Ω–≥
- ‚úÖ `date-fns` - —Ä–∞–±–æ—Ç–∞ —Å –¥–∞—Ç–∞–º–∏
- ‚úÖ `react-big-calendar` - –∫–∞–ª–µ–Ω–¥–∞—Ä–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç

#### 2. API –∫–ª–∏–µ–Ω—Ç—ã
- ‚úÖ `src/services/taskService.ts` - –∫–ª–∏–µ–Ω—Ç –¥–ª—è –∑–∞–¥–∞—á
- ‚úÖ `src/services/tagService.ts` - –∫–ª–∏–µ–Ω—Ç –¥–ª—è —Ç–µ–≥–æ–≤
- ‚úÖ `src/services/userService.ts` - –∫–ª–∏–µ–Ω—Ç –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

#### 3. –†–æ—É—Ç–∏–Ω–≥ –∏ –Ω–∞–≤–∏–≥–∞—Ü–∏—è
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω React Router —Å –º–∞—Ä—à—Ä—É—Ç–∞–º–∏:
  - `/` - Dashboard (–≥–ª–∞–≤–Ω–∞—è)
  - `/tasks` - –í—Å–µ –∑–∞–¥–∞—á–∏
  - `/calendar` - –ö–∞–ª–µ–Ω–¥–∞—Ä—å
  - `/tags` - –¢–µ–≥–∏
  - `/settings` - –ù–∞—Å—Ç—Ä–æ–π–∫–∏

- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω `App.tsx` —Å:
  - Desktop –Ω–∞–≤–∏–≥–∞—Ü–∏–µ–π –≤ AppBar
  - Mobile –Ω–∞–≤–∏–≥–∞—Ü–∏–µ–π (Drawer + BottomNavigation)
  - –ê–∫—Ç–∏–≤–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –¥–ª—è –º–∞—Ä—à—Ä—É—Ç–æ–≤

#### 4. –°—Ç—Ä–∞–Ω–∏—Ü—ã (–∑–∞–≥–æ—Ç–æ–≤–∫–∏)
- ‚úÖ `Dashboard.tsx` - –≥–ª–∞–≤–Ω–∞—è —Å –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª–µ–º –¥–µ–Ω—å/–Ω–µ–¥–µ–ª—è/–º–µ—Å—è—Ü
- ‚úÖ `TasksPage.tsx` - –≤—Å–µ –∑–∞–¥–∞—á–∏
- ‚úÖ `CalendarPage.tsx` - –∫–∞–ª–µ–Ω–¥–∞—Ä–Ω—ã–π –≤–∏–¥
- ‚úÖ `TagsPage.tsx` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–µ–≥–∞–º–∏
- ‚úÖ `SettingsPage.tsx` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

---

## üöß –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –¥–∞–ª—å—à–µ

### –≠—Ç–∞–ø 1: –ë–∞–∑–æ–≤—ã–µ UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–ª—è –∑–∞–¥–∞—á
1. `TaskList.tsx` - —Å–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á —Å —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–æ–π
2. `TaskCard.tsx` - –∫–∞—Ä—Ç–æ—á–∫–∞ –∑–∞–¥–∞—á–∏
3. `TaskForm.tsx` - —Ñ–æ—Ä–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
4. `TaskQuickAdd.tsx` - –±—ã—Å—Ç—Ä–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏ (–¥–∏–∞–ª–æ–≥)
5. `TaskFilters.tsx` - –ø–∞–Ω–µ–ª—å —Ñ–∏–ª—å—Ç—Ä–æ–≤
6. `TaskStatusChip.tsx` - —á–∏–ø —Å—Ç–∞—Ç—É—Å–∞
7. `TaskPriorityBadge.tsx` - –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞

### –≠—Ç–∞–ø 2: –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–ª—è —Ç–µ–≥–æ–≤
1. `TagManager.tsx` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–µ–≥–∞–º–∏
2. `TagSelect.tsx` - –≤—ã–±–æ—Ä —Ç–µ–≥–æ–≤ (multiselect)
3. `TagChip.tsx` - —á–∏–ø —Ç–µ–≥–∞ —Å —Ü–≤–µ—Ç–æ–º
4. `TagDialog.tsx` - —Å–æ–∑–¥–∞–Ω–∏–µ/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ–≥–∞

### –≠—Ç–∞–ø 3: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∫–∞–ª–µ–Ω–¥–∞—Ä—è
1. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å `react-big-calendar` –∏–ª–∏ `fullcalendar`
2. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∑–∞–¥–∞—á –Ω–∞ –∫–∞–ª–µ–Ω–¥–∞—Ä–µ
3. Drag & drop –¥–ª—è –ø–µ—Ä–µ–Ω–æ—Å–∞ –∑–∞–¥–∞—á
4. –ö–ª–∏–∫ –ø–æ –¥–∞—Ç–µ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–¥–∞—á–∏

### –≠—Ç–∞–ø 4: –ü–µ—Ä–∏–æ–¥–∏—á–Ω–æ—Å—Ç—å –∑–∞–¥–∞—á
1. Backend:
   - API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –¥–ª—è recurrence
   - –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤ –∑–∞–¥–∞—á
   - Cron job –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
2. Frontend:
   - `RecurrenceForm.tsx` - —Ñ–æ—Ä–º–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è
   - `RecurrenceInfo.tsx` - –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø—Ä–∞–≤–∏–ª
   - `InstancesList.tsx` - —Å–ø–∏—Å–æ–∫ –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤

### –≠—Ç–∞–ø 5: –®–∞—Ä–∏–Ω–≥ –∏ –¥—Ä—É–∑—å—è
1. Backend:
   - API –¥–ª—è —à–∞—Ä–∏–Ω–≥–∞ –∑–∞–¥–∞—á
   - API –¥–ª—è –¥—Ä—É–∑–µ–π
2. Frontend:
   - `ShareTaskDialog.tsx` - –¥–∏–∞–ª–æ–≥ —à–∞—Ä–∏–Ω–≥–∞
   - `FriendsList.tsx` - —Å–ø–∏—Å–æ–∫ –¥—Ä—É–∑–µ–π
   - `UserSearch.tsx` - –ø–æ–∏—Å–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

---

## üîß –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å

### –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π –ë–î:
```bash
# Local
npx wrangler d1 execute planer-db --local --file=migrations/0002_tasks_schema.sql

# Production
npx wrangler d1 execute planer-db --remote --file=migrations/0002_tasks_schema.sql
```

### –ó–∞–ø—É—Å–∫ backend (Worker):
```bash
npm run dev
# Worker –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ http://localhost:8787
```

### –ó–∞–ø—É—Å–∫ frontend:
```bash
# –í –¥—Ä—É–≥–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ
npm run dev
# Frontend –Ω–∞ http://localhost:5173
```

### –î–µ–ø–ª–æ–π:
```bash
npm run deploy
```

---

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

### –ú—É–ª—å—Ç–∏—Ç–µ–Ω–∞–Ω—Ç–Ω–æ—Å—Ç—å
–í—Å–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ñ–∏–ª—å—Ç—Ä—É—é—Ç –¥–∞–Ω–Ω—ã–µ –ø–æ `user_id` –∏–∑ Firebase —Ç–æ–∫–µ–Ω–∞:
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ –∑–∞–¥–∞—á–∏
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ —Ç–µ–≥–∏
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç –∑–∞–¥–∞—á–∏, —Ä–∞—Å—à–∞—Ä–µ–Ω–Ω—ã–µ —Å –Ω–∏–º

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–ª–∞–¥–µ–ª—å—Ü–∞ –ø–µ—Ä–µ–¥ –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º/—É–¥–∞–ª–µ–Ω–∏–µ–º
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ –¥–ª—è —Ä–∞—Å—à–∞—Ä–µ–Ω–Ω—ã—Ö –∑–∞–¥–∞—á
- Email verification middleware

### API –∫–ª–∏–µ–Ω—Ç—ã
–í—Å–µ API –∫–ª–∏–µ–Ω—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç –±–∞–∑–æ–≤—ã–π URL:
- –í dev —Ä–µ–∂–∏–º–µ: `http://localhost:8787/api`
- –í production: `/api`

---

## üéØ –°—Ç–∞—Ç—É—Å TODO

- ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏–∏ –ë–î
- ‚úÖ TypeScript —Ç–∏–ø—ã
- ‚úÖ Backend API (users, tasks, tags)
- ‚úÖ Frontend API –∫–ª–∏–µ–Ω—Ç—ã
- ‚úÖ –†–æ—É—Ç–∏–Ω–≥ –∏ –Ω–∞–≤–∏–≥–∞—Ü–∏—è
- ‚úÖ –ë–∞–∑–æ–≤—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- ‚è≥ UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–ª—è –∑–∞–¥–∞—á
- ‚è≥ –ö–∞–ª–µ–Ω–¥–∞—Ä–Ω—ã–π –≤–∏–¥
- ‚è≥ –ü–µ—Ä–∏–æ–¥–∏—á–Ω–æ—Å—Ç—å –∑–∞–¥–∞—á
- ‚è≥ –®–∞—Ä–∏–Ω–≥ –∏ –¥—Ä—É–∑—å—è

